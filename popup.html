<!doctype html> 
<html lang="en"> 
<head> 
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script> 
  <link rel="stylesheet" type="text/css" href="popup.css">

  <meta charset="utf-8"> 
  <title>Shuffler.fm Douchebar</title> 

<script>

  $(document).ready(function() {
      chrome.tabs.getSelected(null, function(tab) {
        $('#msg').html('url: ' + tab.url);
        var track_id = tab.url.match(/track=(.*)/)[1];
        $('#msg').html('track_id: ' + track_id);
        $.get('http://shuffler.fm/tracks/' + track_id + '.json', function(data) {
          showArtist(data);
          showBio(data);
          showConcerts(data);
          showButtons();
        });
      });
  });

  function showArtist(data) {
    $('#badge h1').html(data.artist);
    $('#badge img').attr('src', data.image);
  }

  function showBio(data) {
	console.log(data.artist);
	$.get('http://developer.echonest.com/api/v4/artist/biographies?api_key=JE5HC1XA1JNMFKH3K&name=' + data.artist, function(result) {
		$.('#bio').text(result.response.biographies[0].text);
	});
  }

  function showConcerts(data) {
    $.getJSON("http://api.songkick.com/api/3.0/events.json?location=clientipamp;apikey={your_api_key}&jsoncallback=?",
function(data){
// data is JSON response object
});
  }

  function showButtons(data) {

  }

</script>


<body>
  <section id="badge">
    <h1><!-- Artist Name--></h1>
    <img></img>
  </section>
  <section id="bio">
  </section>
  <section id="concerts">
  </section>
  <section id="buttons">
  </section>
  <section id="poweredby">
    <a href="http://shuffler.fm">
      <img src="http://shuffler.fm/images/favicon.png">
    </a>
    the.echonest.com
| songkick.com
  </section>

</html> 
